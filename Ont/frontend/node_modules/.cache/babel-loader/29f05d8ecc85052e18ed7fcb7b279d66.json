{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LoginDesktop = void 0;\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar form_items_1 = require(\"./form-items\");\n\nexports.LoginDesktop = function (_a) {\n  var classNames = _a.classNames,\n      showActive = _a.showActive,\n      hide = _a.hide,\n      onSubmit = _a.onSubmit;\n\n  var _b = react_1.useState(true),\n      loading = _b[0],\n      setLoading = _b[1];\n\n  var _c = react_1.useState([]),\n      projects = _c[0],\n      setProjects = _c[1];\n\n  var _d = react_1.useState(),\n      error = _d[0],\n      setError = _d[1];\n\n  var _e = react_1.useState({}),\n      project = _e[0],\n      setProject = _e[1];\n\n  var _f = react_1.useState(),\n      graph = _f[0],\n      setGraph = _f[1];\n\n  react_1.useEffect(function () {\n    // @ts-ignore\n    if (!window.neo4jDesktopApi) {\n      setLoading(false);\n      return;\n    } // @ts-ignore\n\n\n    window.neo4jDesktopApi.getContext().then(function (context) {\n      var projects = context.projects.map(function (_a) {\n        var id = _a.id,\n            name = _a.name,\n            graphs = _a.graphs;\n        return {\n          id: id,\n          name: name,\n          graphs: graphs\n        };\n      });\n      setProjects(projects);\n      setProject(projects[0]);\n      setGraph(projects[0].graphs[0]);\n      setLoading(false);\n    });\n  }, []);\n\n  var handleProjectChange = function (selected) {\n    setProject(selected.value);\n    setGraph(selected.value.graphs[0]);\n  };\n\n  var handleGraphChange = function (selected) {\n    setGraph(selected.value);\n  };\n\n  var handleSubmit = function () {\n    if (!graph) return;\n    var _a = graph.connection.configuration.protocols.bolt,\n        url = _a.url,\n        host = _a.host,\n        port = _a.port,\n        username = _a.username,\n        password = _a.password;\n    var scheme = 'neo4j';\n\n    if (url.includes('://')) {\n      scheme = url.split('://')[0];\n    }\n\n    onSubmit({\n      scheme: scheme,\n      host: host,\n      port: port,\n      username: username,\n      password: password\n    });\n  };\n\n  var connectToActiveGraph = function () {\n    var graphs = projects.reduce(function (state, project) {\n      return state.concat(project.graphs);\n    }, []);\n    var active = graphs.find(function (graph) {\n      return graph.status === 'ACTIVE';\n    });\n    if (!active) setError(new Error('There is no active graph.  Click the `Start` button on a Database in Neoj Desktop and try again.'));\n    var _a = active.connection.configuration.protocols.bolt,\n        host = _a.host,\n        port = _a.port,\n        username = _a.username,\n        password = _a.password;\n    var scheme = 'neo4j';\n    onSubmit({\n      scheme: scheme,\n      host: host,\n      port: port,\n      username: username,\n      password: password\n    });\n  };\n\n  if (loading) {\n    return react_1.default.createElement(\"div\", null);\n  } // @ts-ignore\n\n\n  var graphs = (project === null || project === void 0 ? void 0 : project.graphs) && react_1.default.createElement(form_items_1.FormSelect, {\n    classNames: classNames,\n    id: \"graph\",\n    label: \"Graph\",\n    options: project === null || project === void 0 ? void 0 : project.graphs.map(function (value) {\n      return {\n        key: value.id,\n        text: value.name,\n        value: value\n      };\n    }),\n    value: graph,\n    setter: handleGraphChange\n  });\n  return react_1.default.createElement(\"div\", null, error && react_1.default.createElement(\"div\", {\n    className: classNames.formError\n  }, error.message), react_1.default.createElement(form_items_1.FormSelect, {\n    classNames: classNames,\n    id: \"project\",\n    label: \"Project\",\n    options: projects.map(function (value) {\n      return {\n        key: value.id,\n        text: value.name,\n        value: value\n      };\n    }),\n    value: project,\n    setter: handleProjectChange\n  }), graphs, react_1.default.createElement(\"div\", {\n    className: classNames.formButtons\n  }, project && graph && react_1.default.createElement(form_items_1.FormButton, {\n    text: \"Connect\",\n    className: classNames.formButtonPrimary,\n    onClick: handleSubmit\n  }), showActive && react_1.default.createElement(form_items_1.FormButton, {\n    text: \"Active Graph\",\n    className: classNames.formButtonSecondary,\n    onClick: connectToActiveGraph\n  })), react_1.default.createElement(\"div\", {\n    className: classNames.loginOtherDatabase\n  }, react_1.default.createElement(\"a\", {\n    onClick: function () {\n      return hide();\n    }\n  }, \"Or connect to another graph\")));\n};","map":{"version":3,"sources":["/Users/ericyangchen/Downloads/Ont/frontend/node_modules/use-neo4j/dist/components/login-desktop.js"],"names":["__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","prototype","hasOwnProperty","call","exports","LoginDesktop","react_1","require","form_items_1","_a","classNames","showActive","hide","onSubmit","_b","useState","loading","setLoading","_c","projects","setProjects","_d","error","setError","_e","project","setProject","_f","graph","setGraph","useEffect","window","neo4jDesktopApi","getContext","then","context","map","id","name","graphs","handleProjectChange","selected","handleGraphChange","handleSubmit","connection","configuration","protocols","bolt","url","host","port","username","password","scheme","includes","split","connectToActiveGraph","reduce","state","concat","active","find","status","Error","default","createElement","FormSelect","label","options","key","text","setter","className","formError","message","formButtons","FormButton","formButtonPrimary","onClick","formButtonSecondary","loginOtherDatabase"],"mappings":"AAAA;;AACA,IAAIA,eAAe,GAAI,QAAQ,KAAKA,eAAd,KAAmCC,MAAM,CAACC,MAAP,GAAiB,UAASC,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkBC,EAAlB,EAAsB;AAC5F,MAAIA,EAAE,KAAKC,SAAX,EAAsBD,EAAE,GAAGD,CAAL;AACtBJ,EAAAA,MAAM,CAACO,cAAP,CAAsBL,CAAtB,EAAyBG,EAAzB,EAA6B;AAAEG,IAAAA,UAAU,EAAE,IAAd;AAAoBC,IAAAA,GAAG,EAAE,YAAW;AAAE,aAAON,CAAC,CAACC,CAAD,CAAR;AAAc;AAApD,GAA7B;AACH,CAHwD,GAGnD,UAASF,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkBC,EAAlB,EAAsB;AACxB,MAAIA,EAAE,KAAKC,SAAX,EAAsBD,EAAE,GAAGD,CAAL;AACtBF,EAAAA,CAAC,CAACG,EAAD,CAAD,GAAQF,CAAC,CAACC,CAAD,CAAT;AACH,CANqB,CAAtB;;AAOA,IAAIM,kBAAkB,GAAI,QAAQ,KAAKA,kBAAd,KAAsCV,MAAM,CAACC,MAAP,GAAiB,UAASC,CAAT,EAAYS,CAAZ,EAAe;AAC3FX,EAAAA,MAAM,CAACO,cAAP,CAAsBL,CAAtB,EAAyB,SAAzB,EAAoC;AAAEM,IAAAA,UAAU,EAAE,IAAd;AAAoBI,IAAAA,KAAK,EAAED;AAA3B,GAApC;AACH,CAF8D,GAE1D,UAAST,CAAT,EAAYS,CAAZ,EAAe;AAChBT,EAAAA,CAAC,CAAC,SAAD,CAAD,GAAeS,CAAf;AACH,CAJwB,CAAzB;;AAKA,IAAIE,YAAY,GAAI,QAAQ,KAAKA,YAAd,IAA+B,UAAUC,GAAV,EAAe;AAC7D,MAAIA,GAAG,IAAIA,GAAG,CAACC,UAAf,EAA2B,OAAOD,GAAP;AAC3B,MAAIE,MAAM,GAAG,EAAb;AACA,MAAIF,GAAG,IAAI,IAAX,EAAiB,KAAK,IAAIV,CAAT,IAAcU,GAAd,EAAmB,IAAIV,CAAC,KAAK,SAAN,IAAmBJ,MAAM,CAACiB,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCL,GAArC,EAA0CV,CAA1C,CAAvB,EAAqEL,eAAe,CAACiB,MAAD,EAASF,GAAT,EAAcV,CAAd,CAAf;;AACzGM,EAAAA,kBAAkB,CAACM,MAAD,EAASF,GAAT,CAAlB;;AACA,SAAOE,MAAP;AACH,CAND;;AAOAhB,MAAM,CAACO,cAAP,CAAsBa,OAAtB,EAA+B,YAA/B,EAA6C;AAAER,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAQ,OAAO,CAACC,YAAR,GAAuB,KAAK,CAA5B;;AACA,IAAIC,OAAO,GAAGT,YAAY,CAACU,OAAO,CAAC,OAAD,CAAR,CAA1B;;AACA,IAAIC,YAAY,GAAGD,OAAO,CAAC,cAAD,CAA1B;;AACAH,OAAO,CAACC,YAAR,GAAuB,UAAUI,EAAV,EAAc;AACjC,MAAIC,UAAU,GAAGD,EAAE,CAACC,UAApB;AAAA,MAAgCC,UAAU,GAAGF,EAAE,CAACE,UAAhD;AAAA,MAA4DC,IAAI,GAAGH,EAAE,CAACG,IAAtE;AAAA,MAA4EC,QAAQ,GAAGJ,EAAE,CAACI,QAA1F;;AACA,MAAIC,EAAE,GAAGR,OAAO,CAACS,QAAR,CAAiB,IAAjB,CAAT;AAAA,MAAiCC,OAAO,GAAGF,EAAE,CAAC,CAAD,CAA7C;AAAA,MAAkDG,UAAU,GAAGH,EAAE,CAAC,CAAD,CAAjE;;AACA,MAAII,EAAE,GAAGZ,OAAO,CAACS,QAAR,CAAiB,EAAjB,CAAT;AAAA,MAA+BI,QAAQ,GAAGD,EAAE,CAAC,CAAD,CAA5C;AAAA,MAAiDE,WAAW,GAAGF,EAAE,CAAC,CAAD,CAAjE;;AACA,MAAIG,EAAE,GAAGf,OAAO,CAACS,QAAR,EAAT;AAAA,MAA6BO,KAAK,GAAGD,EAAE,CAAC,CAAD,CAAvC;AAAA,MAA4CE,QAAQ,GAAGF,EAAE,CAAC,CAAD,CAAzD;;AACA,MAAIG,EAAE,GAAGlB,OAAO,CAACS,QAAR,CAAiB,EAAjB,CAAT;AAAA,MAA+BU,OAAO,GAAGD,EAAE,CAAC,CAAD,CAA3C;AAAA,MAAgDE,UAAU,GAAGF,EAAE,CAAC,CAAD,CAA/D;;AACA,MAAIG,EAAE,GAAGrB,OAAO,CAACS,QAAR,EAAT;AAAA,MAA6Ba,KAAK,GAAGD,EAAE,CAAC,CAAD,CAAvC;AAAA,MAA4CE,QAAQ,GAAGF,EAAE,CAAC,CAAD,CAAzD;;AACArB,EAAAA,OAAO,CAACwB,SAAR,CAAkB,YAAY;AAC1B;AACA,QAAI,CAACC,MAAM,CAACC,eAAZ,EAA6B;AACzBf,MAAAA,UAAU,CAAC,KAAD,CAAV;AACA;AACH,KALyB,CAM1B;;;AACAc,IAAAA,MAAM,CAACC,eAAP,CAAuBC,UAAvB,GACKC,IADL,CACU,UAAUC,OAAV,EAAmB;AACzB,UAAIhB,QAAQ,GAAGgB,OAAO,CAAChB,QAAR,CAAiBiB,GAAjB,CAAqB,UAAU3B,EAAV,EAAc;AAC9C,YAAI4B,EAAE,GAAG5B,EAAE,CAAC4B,EAAZ;AAAA,YAAgBC,IAAI,GAAG7B,EAAE,CAAC6B,IAA1B;AAAA,YAAgCC,MAAM,GAAG9B,EAAE,CAAC8B,MAA5C;AACA,eAAQ;AACJF,UAAAA,EAAE,EAAEA,EADA;AAEJC,UAAAA,IAAI,EAAEA,IAFF;AAGJC,UAAAA,MAAM,EAAEA;AAHJ,SAAR;AAKH,OAPc,CAAf;AAQAnB,MAAAA,WAAW,CAACD,QAAD,CAAX;AACAO,MAAAA,UAAU,CAACP,QAAQ,CAAC,CAAD,CAAT,CAAV;AACAU,MAAAA,QAAQ,CAACV,QAAQ,CAAC,CAAD,CAAR,CAAYoB,MAAZ,CAAmB,CAAnB,CAAD,CAAR;AACAtB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAdD;AAeH,GAtBD,EAsBG,EAtBH;;AAuBA,MAAIuB,mBAAmB,GAAG,UAAUC,QAAV,EAAoB;AAC1Cf,IAAAA,UAAU,CAACe,QAAQ,CAAC7C,KAAV,CAAV;AACAiC,IAAAA,QAAQ,CAACY,QAAQ,CAAC7C,KAAT,CAAe2C,MAAf,CAAsB,CAAtB,CAAD,CAAR;AACH,GAHD;;AAIA,MAAIG,iBAAiB,GAAG,UAAUD,QAAV,EAAoB;AACxCZ,IAAAA,QAAQ,CAACY,QAAQ,CAAC7C,KAAV,CAAR;AACH,GAFD;;AAGA,MAAI+C,YAAY,GAAG,YAAY;AAC3B,QAAI,CAACf,KAAL,EACI;AACJ,QAAInB,EAAE,GAAGmB,KAAK,CAACgB,UAAN,CAAiBC,aAAjB,CAA+BC,SAA/B,CAAyCC,IAAlD;AAAA,QAAwDC,GAAG,GAAGvC,EAAE,CAACuC,GAAjE;AAAA,QAAsEC,IAAI,GAAGxC,EAAE,CAACwC,IAAhF;AAAA,QAAsFC,IAAI,GAAGzC,EAAE,CAACyC,IAAhG;AAAA,QAAsGC,QAAQ,GAAG1C,EAAE,CAAC0C,QAApH;AAAA,QAA8HC,QAAQ,GAAG3C,EAAE,CAAC2C,QAA5I;AACA,QAAIC,MAAM,GAAG,OAAb;;AACA,QAAIL,GAAG,CAACM,QAAJ,CAAa,KAAb,CAAJ,EAAyB;AACrBD,MAAAA,MAAM,GAAGL,GAAG,CAACO,KAAJ,CAAU,KAAV,EAAiB,CAAjB,CAAT;AACH;;AACD1C,IAAAA,QAAQ,CAAC;AAAEwC,MAAAA,MAAM,EAAEA,MAAV;AAAkBJ,MAAAA,IAAI,EAAEA,IAAxB;AAA8BC,MAAAA,IAAI,EAAEA,IAApC;AAA0CC,MAAAA,QAAQ,EAAEA,QAApD;AAA8DC,MAAAA,QAAQ,EAAEA;AAAxE,KAAD,CAAR;AACH,GATD;;AAUA,MAAII,oBAAoB,GAAG,YAAY;AACnC,QAAIjB,MAAM,GAAGpB,QAAQ,CAACsC,MAAT,CAAgB,UAAUC,KAAV,EAAiBjC,OAAjB,EAA0B;AAAE,aAAOiC,KAAK,CAACC,MAAN,CAAalC,OAAO,CAACc,MAArB,CAAP;AAAsC,KAAlF,EAAoF,EAApF,CAAb;AACA,QAAIqB,MAAM,GAAGrB,MAAM,CAACsB,IAAP,CAAY,UAAUjC,KAAV,EAAiB;AAAE,aAAOA,KAAK,CAACkC,MAAN,KAAiB,QAAxB;AAAmC,KAAlE,CAAb;AACA,QAAI,CAACF,MAAL,EACIrC,QAAQ,CAAC,IAAIwC,KAAJ,CAAU,kGAAV,CAAD,CAAR;AACJ,QAAItD,EAAE,GAAGmD,MAAM,CAAChB,UAAP,CAAkBC,aAAlB,CAAgCC,SAAhC,CAA0CC,IAAnD;AAAA,QAAyDE,IAAI,GAAGxC,EAAE,CAACwC,IAAnE;AAAA,QAAyEC,IAAI,GAAGzC,EAAE,CAACyC,IAAnF;AAAA,QAAyFC,QAAQ,GAAG1C,EAAE,CAAC0C,QAAvG;AAAA,QAAiHC,QAAQ,GAAG3C,EAAE,CAAC2C,QAA/H;AACA,QAAIC,MAAM,GAAG,OAAb;AACAxC,IAAAA,QAAQ,CAAC;AAAEwC,MAAAA,MAAM,EAAEA,MAAV;AAAkBJ,MAAAA,IAAI,EAAEA,IAAxB;AAA8BC,MAAAA,IAAI,EAAEA,IAApC;AAA0CC,MAAAA,QAAQ,EAAEA,QAApD;AAA8DC,MAAAA,QAAQ,EAAEA;AAAxE,KAAD,CAAR;AACH,GARD;;AASA,MAAIpC,OAAJ,EAAa;AACT,WAAOV,OAAO,CAAC0D,OAAR,CAAgBC,aAAhB,CAA8B,KAA9B,EAAqC,IAArC,CAAP;AACH,GA1DgC,CA2DjC;;;AACA,MAAI1B,MAAM,GAAG,CAACd,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAACc,MAA3D,KAAsEjC,OAAO,CAAC0D,OAAR,CAAgBC,aAAhB,CAA8BzD,YAAY,CAAC0D,UAA3C,EAAuD;AAAExD,IAAAA,UAAU,EAAEA,UAAd;AAA0B2B,IAAAA,EAAE,EAAE,OAA9B;AAAuC8B,IAAAA,KAAK,EAAE,OAA9C;AAAuDC,IAAAA,OAAO,EAAE3C,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAACc,MAAR,CAAeH,GAAf,CAAmB,UAAUxC,KAAV,EAAiB;AAAE,aAAQ;AAAEyE,QAAAA,GAAG,EAAEzE,KAAK,CAACyC,EAAb;AAAiBiC,QAAAA,IAAI,EAAE1E,KAAK,CAAC0C,IAA7B;AAAmC1C,QAAAA,KAAK,EAAEA;AAA1C,OAAR;AAA6D,KAAnG,CAAlH;AAAwNA,IAAAA,KAAK,EAAEgC,KAA/N;AAAsO2C,IAAAA,MAAM,EAAE7B;AAA9O,GAAvD,CAAnF;AACA,SAAQpC,OAAO,CAAC0D,OAAR,CAAgBC,aAAhB,CAA8B,KAA9B,EAAqC,IAArC,EACJ3C,KAAK,IAAKhB,OAAO,CAAC0D,OAAR,CAAgBC,aAAhB,CAA8B,KAA9B,EAAqC;AAAEO,IAAAA,SAAS,EAAE9D,UAAU,CAAC+D;AAAxB,GAArC,EAA0EnD,KAAK,CAACoD,OAAhF,CADN,EAEJpE,OAAO,CAAC0D,OAAR,CAAgBC,aAAhB,CAA8BzD,YAAY,CAAC0D,UAA3C,EAAuD;AAAExD,IAAAA,UAAU,EAAEA,UAAd;AAA0B2B,IAAAA,EAAE,EAAE,SAA9B;AAAyC8B,IAAAA,KAAK,EAAE,SAAhD;AAA2DC,IAAAA,OAAO,EAAEjD,QAAQ,CAACiB,GAAT,CAAa,UAAUxC,KAAV,EAAiB;AAAE,aAAQ;AAAEyE,QAAAA,GAAG,EAAEzE,KAAK,CAACyC,EAAb;AAAiBiC,QAAAA,IAAI,EAAE1E,KAAK,CAAC0C,IAA7B;AAAmC1C,QAAAA,KAAK,EAAEA;AAA1C,OAAR;AAA6D,KAA7F,CAApE;AAAoKA,IAAAA,KAAK,EAAE6B,OAA3K;AAAoL8C,IAAAA,MAAM,EAAE/B;AAA5L,GAAvD,CAFI,EAGJD,MAHI,EAIJjC,OAAO,CAAC0D,OAAR,CAAgBC,aAAhB,CAA8B,KAA9B,EAAqC;AAAEO,IAAAA,SAAS,EAAE9D,UAAU,CAACiE;AAAxB,GAArC,EACIlD,OAAO,IAAIG,KAAX,IAAoBtB,OAAO,CAAC0D,OAAR,CAAgBC,aAAhB,CAA8BzD,YAAY,CAACoE,UAA3C,EAAuD;AAAEN,IAAAA,IAAI,EAAE,SAAR;AAAmBE,IAAAA,SAAS,EAAE9D,UAAU,CAACmE,iBAAzC;AAA4DC,IAAAA,OAAO,EAAEnC;AAArE,GAAvD,CADxB,EAEIhC,UAAU,IAAIL,OAAO,CAAC0D,OAAR,CAAgBC,aAAhB,CAA8BzD,YAAY,CAACoE,UAA3C,EAAuD;AAAEN,IAAAA,IAAI,EAAE,cAAR;AAAwBE,IAAAA,SAAS,EAAE9D,UAAU,CAACqE,mBAA9C;AAAmED,IAAAA,OAAO,EAAEtB;AAA5E,GAAvD,CAFlB,CAJI,EAOJlD,OAAO,CAAC0D,OAAR,CAAgBC,aAAhB,CAA8B,KAA9B,EAAqC;AAAEO,IAAAA,SAAS,EAAE9D,UAAU,CAACsE;AAAxB,GAArC,EACI1E,OAAO,CAAC0D,OAAR,CAAgBC,aAAhB,CAA8B,GAA9B,EAAmC;AAAEa,IAAAA,OAAO,EAAE,YAAY;AAAE,aAAOlE,IAAI,EAAX;AAAgB;AAAzC,GAAnC,EAAgF,6BAAhF,CADJ,CAPI,CAAR;AASH,CAtED","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LoginDesktop = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar form_items_1 = require(\"./form-items\");\nexports.LoginDesktop = function (_a) {\n    var classNames = _a.classNames, showActive = _a.showActive, hide = _a.hide, onSubmit = _a.onSubmit;\n    var _b = react_1.useState(true), loading = _b[0], setLoading = _b[1];\n    var _c = react_1.useState([]), projects = _c[0], setProjects = _c[1];\n    var _d = react_1.useState(), error = _d[0], setError = _d[1];\n    var _e = react_1.useState({}), project = _e[0], setProject = _e[1];\n    var _f = react_1.useState(), graph = _f[0], setGraph = _f[1];\n    react_1.useEffect(function () {\n        // @ts-ignore\n        if (!window.neo4jDesktopApi) {\n            setLoading(false);\n            return;\n        }\n        // @ts-ignore\n        window.neo4jDesktopApi.getContext()\n            .then(function (context) {\n            var projects = context.projects.map(function (_a) {\n                var id = _a.id, name = _a.name, graphs = _a.graphs;\n                return ({\n                    id: id,\n                    name: name,\n                    graphs: graphs\n                });\n            });\n            setProjects(projects);\n            setProject(projects[0]);\n            setGraph(projects[0].graphs[0]);\n            setLoading(false);\n        });\n    }, []);\n    var handleProjectChange = function (selected) {\n        setProject(selected.value);\n        setGraph(selected.value.graphs[0]);\n    };\n    var handleGraphChange = function (selected) {\n        setGraph(selected.value);\n    };\n    var handleSubmit = function () {\n        if (!graph)\n            return;\n        var _a = graph.connection.configuration.protocols.bolt, url = _a.url, host = _a.host, port = _a.port, username = _a.username, password = _a.password;\n        var scheme = 'neo4j';\n        if (url.includes('://')) {\n            scheme = url.split('://')[0];\n        }\n        onSubmit({ scheme: scheme, host: host, port: port, username: username, password: password });\n    };\n    var connectToActiveGraph = function () {\n        var graphs = projects.reduce(function (state, project) { return state.concat(project.graphs); }, []);\n        var active = graphs.find(function (graph) { return graph.status === 'ACTIVE'; });\n        if (!active)\n            setError(new Error('There is no active graph.  Click the `Start` button on a Database in Neoj Desktop and try again.'));\n        var _a = active.connection.configuration.protocols.bolt, host = _a.host, port = _a.port, username = _a.username, password = _a.password;\n        var scheme = 'neo4j';\n        onSubmit({ scheme: scheme, host: host, port: port, username: username, password: password });\n    };\n    if (loading) {\n        return react_1.default.createElement(\"div\", null);\n    }\n    // @ts-ignore\n    var graphs = (project === null || project === void 0 ? void 0 : project.graphs) && react_1.default.createElement(form_items_1.FormSelect, { classNames: classNames, id: \"graph\", label: \"Graph\", options: project === null || project === void 0 ? void 0 : project.graphs.map(function (value) { return ({ key: value.id, text: value.name, value: value }); }), value: graph, setter: handleGraphChange });\n    return (react_1.default.createElement(\"div\", null,\n        error && (react_1.default.createElement(\"div\", { className: classNames.formError }, error.message)),\n        react_1.default.createElement(form_items_1.FormSelect, { classNames: classNames, id: \"project\", label: \"Project\", options: projects.map(function (value) { return ({ key: value.id, text: value.name, value: value }); }), value: project, setter: handleProjectChange }),\n        graphs,\n        react_1.default.createElement(\"div\", { className: classNames.formButtons },\n            project && graph && react_1.default.createElement(form_items_1.FormButton, { text: \"Connect\", className: classNames.formButtonPrimary, onClick: handleSubmit }),\n            showActive && react_1.default.createElement(form_items_1.FormButton, { text: \"Active Graph\", className: classNames.formButtonSecondary, onClick: connectToActiveGraph })),\n        react_1.default.createElement(\"div\", { className: classNames.loginOtherDatabase },\n            react_1.default.createElement(\"a\", { onClick: function () { return hide(); } }, \"Or connect to another graph\"))));\n};\n"]},"metadata":{},"sourceType":"script"}