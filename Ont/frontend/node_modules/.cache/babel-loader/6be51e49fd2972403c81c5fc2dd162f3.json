{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useLazyWriteCypher = exports.useLazyReadCypher = exports.useWriteCypher = exports.useReadCypher = exports.useCypher = void 0;\n\nvar react_1 = require(\"react\");\n\nvar neo4j_driver_1 = __importDefault(require(\"neo4j-driver\"));\n\nvar neo4j_context_1 = require(\"./neo4j.context\");\n\nexports.useCypher = function (defaultAccessMode, cypher, params, database) {\n  var _a = useLazyCypher(defaultAccessMode, cypher, database),\n      run = _a[0],\n      queryState = _a[1];\n\n  react_1.useEffect(function () {\n    run(params, database);\n  }, []);\n  return __assign({\n    run: run\n  }, queryState);\n};\n\nvar createSession = function (driver, database, defaultAccessMode) {\n  if (database !== undefined && database !== '') {\n    return driver.session({\n      database: database,\n      defaultAccessMode: defaultAccessMode\n    });\n  }\n\n  return driver.session({\n    defaultAccessMode: defaultAccessMode\n  });\n};\n\nexports.useReadCypher = function (cypher, params, database) {\n  return exports.useCypher(neo4j_driver_1.default.session.READ, cypher, params, database);\n};\n\nexports.useWriteCypher = function (cypher, params, database) {\n  return exports.useCypher(neo4j_driver_1.default.session.WRITE, cypher, params, database);\n};\n\nexports.useLazyReadCypher = function (cypher, database) {\n  return useLazyCypher(neo4j_driver_1.default.session.READ, cypher, database);\n};\n\nexports.useLazyWriteCypher = function (cypher, database) {\n  return useLazyCypher(neo4j_driver_1.default.session.WRITE, cypher, database);\n};\n\nvar useLazyCypher = function (defaultAccessMode, cypher, defaultDatabase) {\n  var _a = react_1.useContext(neo4j_context_1.Neo4jContext),\n      driver = _a.driver,\n      database = _a.database;\n\n  if (!driver) throw new Error('`driver` not defined in Neo4jContext. Have you added it into your app as <Neo4jProvider driver={{driver}}> ?');\n\n  var _b = react_1.useState({\n    loading: false,\n    database: database,\n    cypher: cypher\n  }),\n      queryState = _b[0],\n      setQueryState = _b[1];\n\n  var run = function (params, anotherDatabase) {\n    var session = createSession(driver, anotherDatabase || defaultDatabase || database, defaultAccessMode);\n    setQueryState({\n      session: session,\n      loading: true,\n      database: anotherDatabase || defaultDatabase || database,\n      cypher: cypher\n    });\n    return session.run(cypher, params).then(function (result) {\n      setQueryState({\n        session: session,\n        cypher: cypher,\n        params: params,\n        database: anotherDatabase || defaultDatabase || database,\n        loading: false,\n        result: result,\n        records: result.records,\n        first: result.records[0]\n      });\n      session.close();\n      return result;\n    }).catch(function (error) {\n      setQueryState({\n        session: session,\n        cypher: cypher,\n        params: params,\n        database: anotherDatabase || defaultDatabase || database,\n        loading: false,\n        error: error\n      });\n      session.close();\n    });\n  };\n\n  return [run, __assign({\n    cypher: cypher,\n    database: database\n  }, queryState)];\n};","map":{"version":3,"sources":["/Users/ericyangchen/Downloads/Ont/frontend/node_modules/use-neo4j/dist/cypher.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__importDefault","mod","__esModule","defineProperty","exports","value","useLazyWriteCypher","useLazyReadCypher","useWriteCypher","useReadCypher","useCypher","react_1","require","neo4j_driver_1","neo4j_context_1","defaultAccessMode","cypher","params","database","_a","useLazyCypher","run","queryState","useEffect","createSession","driver","undefined","session","default","READ","WRITE","defaultDatabase","useContext","Neo4jContext","Error","_b","useState","loading","setQueryState","anotherDatabase","then","result","records","first","close","catch","error"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useLazyWriteCypher = exports.useLazyReadCypher = exports.useWriteCypher = exports.useReadCypher = exports.useCypher = void 0;\nvar react_1 = require(\"react\");\nvar neo4j_driver_1 = __importDefault(require(\"neo4j-driver\"));\nvar neo4j_context_1 = require(\"./neo4j.context\");\nexports.useCypher = function (defaultAccessMode, cypher, params, database) {\n    var _a = useLazyCypher(defaultAccessMode, cypher, database), run = _a[0], queryState = _a[1];\n    react_1.useEffect(function () {\n        run(params, database);\n    }, []);\n    return __assign({ run: run }, queryState);\n};\nvar createSession = function (driver, database, defaultAccessMode) {\n    if (database !== undefined && database !== '') {\n        return driver.session({ database: database, defaultAccessMode: defaultAccessMode });\n    }\n    return driver.session({ defaultAccessMode: defaultAccessMode });\n};\nexports.useReadCypher = function (cypher, params, database) { return exports.useCypher(neo4j_driver_1.default.session.READ, cypher, params, database); };\nexports.useWriteCypher = function (cypher, params, database) { return exports.useCypher(neo4j_driver_1.default.session.WRITE, cypher, params, database); };\nexports.useLazyReadCypher = function (cypher, database) { return useLazyCypher(neo4j_driver_1.default.session.READ, cypher, database); };\nexports.useLazyWriteCypher = function (cypher, database) { return useLazyCypher(neo4j_driver_1.default.session.WRITE, cypher, database); };\nvar useLazyCypher = function (defaultAccessMode, cypher, defaultDatabase) {\n    var _a = react_1.useContext(neo4j_context_1.Neo4jContext), driver = _a.driver, database = _a.database;\n    if (!driver)\n        throw new Error('`driver` not defined in Neo4jContext. Have you added it into your app as <Neo4jProvider driver={{driver}}> ?');\n    var _b = react_1.useState({ loading: false, database: database, cypher: cypher }), queryState = _b[0], setQueryState = _b[1];\n    var run = function (params, anotherDatabase) {\n        var session = createSession(driver, anotherDatabase || defaultDatabase || database, defaultAccessMode);\n        setQueryState({ session: session, loading: true, database: anotherDatabase || defaultDatabase || database, cypher: cypher });\n        return session.run(cypher, params)\n            .then(function (result) {\n            setQueryState({\n                session: session,\n                cypher: cypher,\n                params: params,\n                database: anotherDatabase || defaultDatabase || database,\n                loading: false,\n                result: result,\n                records: result.records,\n                first: result.records[0],\n            });\n            session.close();\n            return result;\n        })\n            .catch(function (error) {\n            setQueryState({\n                session: session,\n                cypher: cypher,\n                params: params,\n                database: anotherDatabase || defaultDatabase || database,\n                loading: false,\n                error: error,\n            });\n            session.close();\n        });\n    };\n    return [\n        run,\n        __assign({ cypher: cypher,\n            database: database }, queryState)\n    ];\n};\n"]},"metadata":{},"sourceType":"script"}